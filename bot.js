"use strict";var oe=Object.create;var $=Object.defineProperty;var ae=Object.getOwnPropertyDescriptor;var se=Object.getOwnPropertyNames;var ne=Object.getPrototypeOf,ie=Object.prototype.hasOwnProperty;var me=(e,t,o,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of se(t))!ie.call(e,r)&&r!==o&&$(e,r,{get:()=>t[r],enumerable:!(a=ae(t,r))||a.enumerable});return e};var h=(e,t,o)=>(o=e!=null?oe(ne(e)):{},me(t||!e||!e.__esModule?$(o,"default",{value:e,enumerable:!0}):o,e));var s=(e,t,o)=>new Promise((a,r)=>{var i=p=>{try{y(o.next(p))}catch(n){r(n)}},d=p=>{try{y(o.throw(p))}catch(n){r(n)}},y=p=>p.done?a(p.value):Promise.resolve(p.value).then(i,d);y((o=o.apply(e,t)).next())});var w=require("grammy"),T=require("@grammyjs/conversations"),te=require("@grammyjs/auto-retry");function k(e,t){return s(this,null,function*(){var r;yield e.answerCallbackQuery();let[o,a]=yield(r=e.callbackQuery)==null?void 0:r.data.split(":");o==="responce"&&(yield e.conversation.enter("responce")),yield t()})}var pe=new Date;console.log(pe);var Q=require("grammy");var N=h(require("dotenv"));N.config();var de=e=>{if(!process.env[e])throw new Error("\u041D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u0430 \u043F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u0430\u044F \u043E\u043A\u0440\u0443\u0436\u0435\u043D\u0438\u044F "+e);return process.env[e]},q=de("API_BASE_URL"),O=e=>s(null,null,function*(){let t=`${q}globalGetServer?payload=${e}`,o=yield fetch(t);try{return yield o.json()}catch(a){return"\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u0438 \u0434\u0430\u043D\u043D\u044B\u0445"}});function l(e,t){return s(this,null,function*(){try{let o=`${q}${e}`,a=yield fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),r=yield a.json();if(a.ok)return r;{let i=yield a.text();alert("\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044C \u043A \u0430\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440\u0443 "+i)}}catch(o){return"\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043F\u0435\u0440\u0435\u0434\u0430\u0447\u0435 \u0434\u0430\u043D\u043D\u044B\u0445"}})}var g=require("date-fns");var K=h(require("minio"));var L=h(require("dotenv"));L.config();var x=e=>{if(!process.env[e])throw new Error("\u041D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u0430 \u043F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u0430\u044F \u043E\u043A\u0440\u0443\u0436\u0435\u043D\u0438\u044F "+e);return process.env[e]},E=x("BOT_TOKEN"),I=x("S3_ENDPOINT"),P=x("S3_ACCESS_KEY"),R=x("S3_SECRET_KEY"),v=x("S3_BUCKET_NAME");var S=h(require("fs")),M=h(require("path")),D=require("stream/promises"),H=require("stream");var U=new K.Client({endPoint:I,accessKey:P,secretKey:R}),A=M.join(__dirname,"../tmp");function ce(){return s(this,null,function*(){yield S.promises.mkdir(A,{recursive:!0})})}function le(e,t){return s(this,null,function*(){let o=H.Readable.fromWeb(e),a=S.createWriteStream(t);yield(0,D.pipeline)(o,a)})}function ye(e,t){return s(this,null,function*(){return yield U.fPutObject(v,e,t)})}function ue(e,t=!0){return s(this,null,function*(){return t?`https://${I}/${v}/${encodeURIComponent(e)}`:yield U.presignedGetObject(v,e)})}function j(e){return s(this,null,function*(){let t=Date.now().toString(36)+Math.random().toString(36).slice(2),o=`dt/${t}.jpg`,a=`https://api.telegram.org/file/bot${E}/${e}`,r=yield fetch(a);if(!r.ok)throw new Error(`Failed to fetch file from Telegram: ${r.status} ${r.statusText}`);yield ce();let i=M.join(A,`${t}.jpg`);yield le(r.body,i),yield ye(o,i);let d=yield ue(o);return yield S.promises.unlink(i),d})}function fe(e,t){return s(this,null,function*(){let a=(yield O(`${t}/couriersOrder`)).find(r=>r.orderId===e);if(a)return a})}function B(e,t){return s(this,null,function*(){var n,u,b;let[,o,a]=yield(n=t.callbackQuery)==null?void 0:n.data.split(":"),r=yield e.external(()=>fe(o,a));if(!r){yield t.reply("\u041F\u043E\u0435\u0437\u0434\u043A\u0430 \u0443\u0441\u0442\u0430\u0440\u0435\u043B\u0430 \u0438 \u0435\u0435 \u043D\u0435\u0442 \u0432 \u0431\u0430\u0437\u0435 \u0434\u0430\u043D\u043D\u044B\u0445");return}let i=yield t.reply(`\u041D\u0430\u043F\u0438\u0448\u0438\u0442\u0435 \u0432 \u0447\u0430\u0442 \u0432\u0430\u0448 \u043E\u0442\u0432\u0435\u0442 \u0442\u0435\u043A\u0441\u0442\u043E\u043C \u043F\u043E \u0437\u0430\u043A\u0430\u0437\u0443 ${r.orderNumber}`),d=yield e.waitFor("message:text",{otherwise:c=>c.reply(`<b>\u041E\u0448\u0438\u0431\u043A\u0430!</b> \u0412\u043D\u0430\u0447\u0430\u043B\u0435 \u043E\u0442\u0432\u0435\u0442\u044C\u0442\u0435 \u043D\u0430 \u0437\u0430\u043A\u0430\u0437 ${r.orderNumber}. \u041E\u0442\u0432\u0435\u0442 \u043F\u0440\u0438\u043D\u0438\u043C\u0430\u0435\u0442\u0441\u044F \u0442\u043E\u043B\u044C\u043A\u043E \u0442\u0435\u043A\u0441\u0442\u043E\u043C`,{reply_parameters:{message_id:i.message_id},parse_mode:"HTML"})}).and(c=>{var f,_;return((_=(f=c.msg)==null?void 0:f.text)==null?void 0:_.length)<350},{otherwise:c=>s(null,null,function*(){return yield c.reply("<b>\u041E\u0448\u0438\u0431\u043A\u0430!</b> C\u043B\u0438\u0448\u043A\u043E\u043C \u0434\u043B\u0438\u043D\u043D\u044B\u0439 \u043E\u0442\u0432\u0435\u0442 (\u043C\u0430\u043A\u0441\u0438\u043C\u0443\u043C <b>350!</b> \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432)",{reply_parameters:{message_id:i.message_id},parse_mode:"HTML"})})});yield e.external(()=>s(null,null,function*(){var _;let f=(_=(yield O("unitsSettings")).find(C=>r.unitId===C.unitId))==null?void 0:_.timeZoneShift;if(d.msg.text&&typeof f=="number"){let C=(0,g.format)((0,g.addHours)((0,g.fromUnixTime)(d.msg.date),f),"dd.MM.yyyy HH:mm");r.courierComment=d.msg.text,r.dateResponceCourier=C}}));let y=yield t.reply("\u0425\u043E\u0442\u0438\u0442\u0435 \u043F\u0440\u0438\u043B\u043E\u0436\u0438\u0442\u044C \u0444\u043E\u0442\u043E \u043A \u043F\u043E\u044F\u0441\u043D\u0435\u043D\u0438\u044E?",{reply_markup:new Q.InlineKeyboard().text("\u0414\u0430","\u0414\u0430").text("\u041D\u0435\u0442","\u041D\u0435\u0442")}),p=yield e.waitForCallbackQuery(["\u0414\u0430","\u041D\u0435\u0442"],{otherwise:c=>s(null,null,function*(){yield c.reply("<b>\u041E\u0448\u0438\u0431\u043A\u0430!</b>. \u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u043A\u043D\u043E\u043F\u043A\u0443 \u0414\u0430/\u041D\u0435\u0442",{parse_mode:"HTML",reply_parameters:{message_id:y.message_id}})})});if(p.callbackQuery.data==="\u0414\u0430"){t.reply("\u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u0441\u0432\u043E\u0435 \u0444\u043E\u0442\u043E \u0432 \u0447\u0430\u0442");let c=yield e.waitFor(":photo",{otherwise:C=>s(null,null,function*(){return C.reply("\u041F\u0440\u0438\u043D\u0438\u043C\u0430\u044E\u0442\u0441\u044F \u0442\u043E\u043B\u044C\u043A\u043E \u0444\u043E\u0442\u043E")})}),f=yield c.getFile(),_=yield j(f.file_path);yield t.replyWithPhoto((b=(u=c.message)==null?void 0:u.photo.at(-1))==null?void 0:b.file_id,{caption:`<b>\u041E\u0442\u0447\u0435\u0442!</b>
\u0421\u043F\u0430\u0441\u0438\u0431\u043E, \u043F\u0440\u0438\u043D\u044F\u0442\u044B \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0435 \u043F\u043E\u044F\u0441\u043D\u0435\u043D\u0438\u044F \u043F\u043E \u0437\u0430\u043A\u0430\u0437\u0443 ${r.orderNumber}
- ${d.msg.text}

\u0427\u0442\u043E\u0431\u044B \u043F\u0435\u0440\u0435\u0437\u0430\u043F\u0438\u0441\u0430\u0442\u044C \u043E\u0442\u0432\u0435\u0442 \u0441\u043D\u043E\u0432\u0430 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 <b>\u041E\u0442\u0432\u0435\u0442\u0438\u0442\u044C</b>`,reply_parameters:{message_id:i.message_id,quote:i.text},parse_mode:"HTML"}),r.urlPhoto=_,yield e.external(()=>{l("couriersOrder",r)});return}if(p.callbackQuery.data==="\u041D\u0435\u0442"){yield t.reply(`<b>\u041E\u0442\u0447\u0435\u0442!</b>
\u0421\u043F\u0430\u0441\u0438\u0431\u043E, \u043F\u0440\u0438\u043D\u044F\u0442\u044B \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0435 \u043F\u043E\u044F\u0441\u043D\u0435\u043D\u0438\u044F \u043F\u043E \u0437\u0430\u043A\u0430\u0437\u0443 ${r.orderNumber}
- ${d.msg.text}

\u0427\u0442\u043E\u0431\u044B \u043F\u0435\u0440\u0435\u0437\u0430\u043F\u0438\u0441\u0430\u0442\u044C \u043E\u0442\u0432\u0435\u0442 \u0441\u043D\u043E\u0432\u0430 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 <b>\u041E\u0442\u0432\u0435\u0442\u0438\u0442\u044C</b>`,{reply_parameters:{message_id:i.message_id,quote:i.text},parse_mode:"HTML"}),yield e.external(()=>{l("couriersOrder",r)});return}})}var F=require("grammy");function G(e,t){return s(this,null,function*(){var y,p;let o=yield t.reply(`*\u041F\u0440\u043E\u0441\u0440\u043E\u0447\u043A\u0430  \u043F\u043E \u0437\u0430\u043A\u0430\u0437\u0443* 
\u043A\u0443\u0440\u044C\u0435\u0440 - \u0418\u0432\u0430\u043D\u043E\u0432 \u0418\u0432\u0430\u043D \u0418\u0432\u0430\u043D\u043E\u0432\u0438\u0447;
\u043D\u043E\u043C\u0435\u0440 \u0437\u0430\u043A\u0430\u0437\u0430 - 175-2;
\u043F\u0438\u0446\u0446\u0435\u0440\u0438\u044F - \u0422\u044E\u043C\u0435\u043D\u044C-4;
\u0432\u0440\u0435\u043C\u044F \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u044F - 2024-11-18 20:19;
\u0432\u0440\u0435\u043C\u044F \u043F\u0435\u0440\u0435\u0434\u0430\u0447\u0438 \u0437\u0430\u043A\u0430\u0437\u0430 \u043A\u043B\u0438\u0435\u043D\u0442\u0443 - 2024-11-18 20:48;

\u043F\u0440\u043E\u0433\u043D\u043E\u0437\u043D\u043E\u0435 \u0432\u0440\u0435\u043C\u044F \u0434\u043E\u0441\u0442\u0430\u0432\u043A\u0438 (\u0441 \u0443\u0447\u0435\u0442\u043E\u043C extraTime) -  22,8 \u043C\u0438\u043D\u0443\u0442;
\u0444\u0430\u043A\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0435 \u0432\u0440\u0435\u043C\u044F \u043F\u043E\u0435\u0437\u0434\u043A\u0438 - 29,6 \u043C\u0438\u043D\u0443\u0442;
\u0432\u044B \u043F\u0440\u0435\u0432\u044B\u0441\u0438\u043B\u0438 \u043F\u0440\u043E\u0433\u043D\u043E\u0437 \u043D\u0430  - *6,8 \u043C\u0438\u043D\u0443\u0442*;

\u0412 \u043E\u0442\u0432\u0435\u0442\u043D\u043E\u043C \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0438 \u043D\u0430\u043F\u0438\u0448\u0438\u0442\u0435 \u043F\u043E\u0434\u0440\u043E\u0431\u043D\u0443\u044E \u043F\u0440\u0438\u0447\u0438\u043D\u0443 \u0437\u0430\u0434\u0435\u0440\u0436\u043A\u0438 \u043F\u043E \u0434\u043E\u0441\u0442\u0430\u0432\u043A\u0435 \u0437\u0430\u043A\u0430\u0437\u0430.
\u0421 \u0443\u0447\u0435\u0442\u043E\u043C \u0443\u043A\u0430\u0437\u0430\u043D\u043D\u043E\u0439 \u0432\u0430\u043C\u0438 \u043F\u0440\u0438\u0447\u0438\u043D\u044B \u0443\u043F\u0440\u0430\u0432\u043B\u044F\u044E\u0449\u0438\u043C \u0431\u0443\u0434\u0435\u0442 \u043F\u0440\u0438\u043D\u044F\u0442\u043E \u0434\u0430\u043B\u044C\u043D\u0435\u0439\u0448\u0435\u0435 \u0440\u0435\u0448\u0435\u043D\u0438\u0435.`,{parse_mode:"Markdown",reply_markup:new F.InlineKeyboard().text("\u041E\u0442\u0432\u0435\u0442\u0438\u0442\u044C","\u041E\u0442\u0432\u0435\u0442\u0438\u0442\u044C")});yield e.waitForCallbackQuery("\u041E\u0442\u0432\u0435\u0442\u0438\u0442\u044C",{otherwise:n=>n.reply("<b>\u041E\u0448\u0438\u0431\u043A\u0430!</b> \u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u043A\u043D\u043E\u043F\u043A\u0443 <b>\u043E\u0442\u0432\u0435\u0442\u0438\u0442\u044C!</b>",{reply_parameters:{message_id:o.message_id},parse_mode:"HTML"})});let a=yield t.reply("\u041D\u0430\u043F\u0438\u0448\u0438\u0442\u0435 \u0432 \u0447\u0430\u0442 \u0432\u0430\u0448 \u043E\u0442\u0432\u0435\u0442 \u0442\u0435\u043A\u0441\u0442\u043E\u043C \u043F\u043E \u0437\u0430\u043A\u0430\u0437\u0443 175-2"),r=yield e.waitFor("message:text",{otherwise:n=>n.reply("<b>\u041E\u0448\u0438\u0431\u043A\u0430!</b> \u0412\u043D\u0430\u0447\u0430\u043B\u0435 \u043E\u0442\u0432\u0435\u0442\u044C\u0442\u0435 \u043D\u0430 \u0437\u0430\u043A\u0430\u0437 175-2. \u041E\u0442\u0432\u0435\u0442 \u043F\u0440\u0438\u043D\u0438\u043C\u0430\u0435\u0442\u0441\u044F \u0442\u043E\u043B\u044C\u043A\u043E \u0442\u0435\u043A\u0441\u0442\u043E\u043C",{reply_parameters:{message_id:a.message_id},parse_mode:"HTML"})}).and(n=>{var u,b;return((b=(u=n.msg)==null?void 0:u.text)==null?void 0:b.length)<350},{otherwise:n=>s(null,null,function*(){return yield n.reply("<b>\u041E\u0448\u0438\u0431\u043A\u0430!</b> C\u043B\u0438\u0448\u043A\u043E\u043C \u0434\u043B\u0438\u043D\u043D\u044B\u0439 \u043E\u0442\u0432\u0435\u0442 (\u043C\u0430\u043A\u0441\u0438\u043C\u0443\u043C <b>350!</b> \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432)",{reply_parameters:{message_id:a.message_id},parse_mode:"HTML"})})}),i=yield t.reply("\u0425\u043E\u0442\u0438\u0442\u0435 \u043F\u0440\u0438\u043B\u043E\u0436\u0438\u0442\u044C \u0444\u043E\u0442\u043E \u043A \u043F\u043E\u044F\u0441\u043D\u0435\u043D\u0438\u044E?",{reply_markup:new F.InlineKeyboard().text("\u0414\u0430","\u0414\u0430 \u0442\u0435\u0441\u0442").text("\u041D\u0435\u0442","\u041D\u0435\u0442 \u0442\u0435\u0441\u0442")}),d=yield e.waitForCallbackQuery(["\u0414\u0430 \u0442\u0435\u0441\u0442","\u041D\u0435\u0442 \u0442\u0435\u0441\u0442"],{otherwise:n=>s(null,null,function*(){yield n.reply("<b>\u041E\u0448\u0438\u0431\u043A\u0430!</b>. \u0412\u044B\u0431\u0435\u0440\u0435\u0442\u0435 \u043E\u0442\u0432\u0435\u0442, \u043D\u0430\u0436\u0430\u0432 \u043A\u043D\u043E\u043F\u043A\u0443 \u0414\u0430/\u041D\u0435\u0442",{parse_mode:"HTML",reply_parameters:{message_id:i.message_id}})})});if(d.callbackQuery.data==="\u0414\u0430 \u0442\u0435\u0441\u0442"){t.reply("\u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u0441\u0432\u043E\u0435 \u0444\u043E\u0442\u043E \u0432 \u0447\u0430\u0442");let n=yield e.waitFor(":photo",{otherwise:u=>s(null,null,function*(){return u.reply("\u041F\u0440\u0438\u043D\u0438\u043C\u0430\u044E\u0442\u0441\u044F \u0442\u043E\u043B\u044C\u043A\u043E \u0444\u043E\u0442\u043E")})});yield n.getFile(),yield t.replyWithPhoto((p=(y=n.message)==null?void 0:y.photo.at(-1))==null?void 0:p.file_id,{caption:`<b>\u041E\u0442\u0447\u0435\u0442!</b>
\u0421\u043F\u0430\u0441\u0438\u0431\u043E, \u043F\u0440\u0438\u043D\u044F\u0442\u044B \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0435 \u043F\u043E\u044F\u0441\u043D\u0435\u043D\u0438\u044F \u043F\u043E \u0437\u0430\u043A\u0430\u0437\u0443 175-2
- ${r.msg.text}

\u0427\u0442\u043E\u0431\u044B \u043F\u0435\u0440\u0435\u0437\u0430\u043F\u0438\u0441\u0430\u0442\u044C \u043E\u0442\u0432\u0435\u0442 \u0441\u043D\u043E\u0432\u0430 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 <b>\u041E\u0442\u0432\u0435\u0442\u0438\u0442\u044C</b>`,reply_parameters:{message_id:a.message_id,quote:a.text},parse_mode:"HTML"});return}d.callbackQuery.data==="\u041D\u0435\u0442 \u0442\u0435\u0441\u0442"&&(yield t.reply(`<b>\u041E\u0442\u0447\u0435\u0442!</b>
\u0421\u043F\u0430\u0441\u0438\u0431\u043E, \u043F\u0440\u0438\u043D\u044F\u0442\u044B \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0435 \u043F\u043E\u044F\u0441\u043D\u0435\u043D\u0438\u044F \u043F\u043E \u0437\u0430\u043A\u0430\u0437\u0443 175-2
- ${r.msg.text}

\u0427\u0442\u043E\u0431\u044B \u043F\u0435\u0440\u0435\u0437\u0430\u043F\u0438\u0441\u0430\u0442\u044C \u043E\u0442\u0432\u0435\u0442 \u0441\u043D\u043E\u0432\u0430 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 <b>\u041E\u0442\u0432\u0435\u0442\u0438\u0442\u044C</b>`,{reply_parameters:{message_id:a.message_id,quote:a.text},parse_mode:"HTML"}))})}function W(e){return s(this,null,function*(){yield e.api.setMyCommands([{command:"qrcode",description:"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C QR \u043A\u043E\u0434 \u043E\u043F\u043B\u0430\u0442\u044B"},{command:"faq",description:"\u041E\u0442\u0432\u0435\u0442\u044B \u043D\u0430 \u0447\u0430\u0441\u0442\u044B\u0435 \u0432\u043E\u043F\u0440\u043E\u0441\u044B"},{command:"payment",description:"\u0420\u0430\u0437\u043C\u0435\u0440\u044B \u0434\u043E\u043F\u043B\u0430\u0442 \u0432 \u043F\u0438\u0446\u0446\u0435\u0440\u0438\u044F\u0445"},{command:"mysalary",description:"\u041C\u043E\u0438 \u0434\u043E\u043F\u043B\u0430\u0442\u044B"},{command:"test",description:"\u041E\u0431\u0443\u0447\u0430\u044E\u0449\u0438\u0439 \u0437\u0430\u043A\u0430\u0437"},{command:"my_orders",description:"\u0412\u0441\u0435 \u043C\u043E\u0438 \u0437\u0430\u043A\u0430\u0437\u044B \u0437\u0430 \u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435 24 \u0447\u0430\u0441\u0430"},{command:"problem_orders",description:"\u041F\u0440\u043E\u0431\u043B\u0435\u043C\u043D\u044B\u0435 \u043F\u043E\u0435\u0437\u0434\u043A\u0438"}],{scope:{type:"all_private_chats"}})})}function Y(e){l("qrcode",{content:"/qrcode",chatId:e.chatId})}function Z(e){l("payment",{content:"/payment",chatId:e.chatId})}function J(e){l("mysalary",{content:"/mysalary",chatId:e.chatId})}function z(e){l("problem_orders",{content:"/problem_orders",chatId:e.chatId})}function V(e){return s(this,null,function*(){l("my_orders",{content:"/my_orders",chatId:e.chatId})})}function X(){return`
*\u041A\u0430\u043A \u043E\u0442\u0432\u0435\u0442\u0438\u0442\u044C \u0431\u043E\u0442\u0443?*
1. \u041E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E \u043D\u0430\u0436\u043C\u0438\u0442\u0435 \u043A\u043D\u043E\u043F\u043A\u0443 "\u041E\u0442\u0432\u0435\u0442\u0438\u0442\u044C". \u0414\u043B\u044F \u0442\u043E\u0433\u043E, \u0447\u0442\u043E\u0431\u044B \u0431\u043E\u0442 \u043F\u0440\u0438\u043D\u044F\u043B \u043E\u0442\u0432\u0435\u0442 \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u043D\u0430\u0436\u0430\u0442\u044C \u043A\u043D\u043E\u043F\u043A\u0443 "\u041E\u0442\u0432\u0435\u0442\u0438\u0442\u044C" \u0438 \u0442\u043E\u043B\u044C\u043A\u043E \u043F\u043E\u0441\u043B\u0435 \u044D\u0442\u043E\u0433\u043E \u043F\u0438\u0441\u0430\u0442\u044C \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435 \u0441 \u043E\u0442\u0432\u0435\u0442\u043E\u043C. 
2. \u041D\u0430\u043F\u0438\u0448\u0438\u0442\u0435 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435 \u0441 \u043E\u0431\u044A\u044F\u0441\u043D\u0435\u043D\u0438\u0435\u043C, \u043F\u043E\u0447\u0435\u043C\u0443 \u0432\u0440\u0435\u043C\u044F \u0434\u043E\u0441\u0442\u0430\u0432\u043A\u0438 \u0437\u0430\u043A\u0430\u0437\u0430 \u0434\u043E \u043A\u043B\u0438\u0435\u043D\u0442\u0430 \u0431\u044B\u043B\u043E \u043F\u0440\u0435\u0432\u044B\u0448\u0435\u043D\u043E.
3. \u041F\u043E\u0441\u043B\u0435 \u043D\u0430\u043F\u0438\u0441\u0430\u043D\u0438\u044F \u043E\u0442\u0432\u0435\u0442\u0430 \u043E\u0442\u043F\u0440\u0430\u0432\u044C\u0442\u0435 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435 \u0432 \u0442\u0435\u043B\u0435\u0433\u0440\u0430\u043C\u043C.
4. \u0414\u043E\u0436\u0434\u0438\u0442\u0435\u0441\u044C \u043E\u0442\u0447\u0435\u0442\u0430 \u043E\u0442 \u0441\u0438\u0441\u0442\u0435\u043C\u044B (\u0431\u043E\u0442\u0430), \u0447\u0442\u043E \u043E\u0442\u0432\u0435\u0442 \u043F\u0440\u0438\u043D\u044F\u0442. \u0415\u0441\u043B\u0438 \u043E\u0442\u0447\u0435\u0442\u0430 \u043D\u0435\u0442, \u0437\u043D\u0430\u0447\u0438\u0442 \u043E\u0442\u0432\u0435\u0442 \u043D\u0435 \u0431\u044B\u043B \u0437\u0430\u043F\u0438\u0441\u0430\u043D.


*\u041A\u0430\u043A \u043F\u0440\u043E\u0432\u0435\u0440\u0438\u0442\u044C \u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D \u043B\u0438 \u043C\u043E\u0439 \u0430\u043A\u043A\u0430\u0443\u043D\u0442 \u043A \u0431\u043E\u0442\u0443 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0439 \u0442\u0435\u043B\u0435\u0433\u0440\u0430\u043C\u043C?*
\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043A\u043E\u043C\u0430\u043D\u0434\u0443 \u043C\u043E\u0438 \u0437\u0430\u043A\u0430\u0437\u044B (/myorders).  \u0415\u0441\u043B\u0438 \u0432\u044B \u0432\u0438\u0434\u0438\u0442\u0435 \u0441\u043F\u0438\u0441\u043E\u043A \u0441\u043E \u0441\u0432\u043E\u0438\u043C\u0438 \u0437\u0430\u043A\u0430\u0437\u0430\u043C\u0438 (\u0438\u043B\u0438 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0435 \u043E\u0431 \u0438\u0445 \u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0438), \u0442\u043E \u043F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435, \u0447\u0442\u043E \u0431\u043E\u0442 \u0432\u0435\u0440\u043D\u043E \u0443\u043A\u0430\u0437\u0430\u043B \u0432\u0430\u0448\u0435 \u0438\u043C\u044F. \u0415\u0441\u043B\u0438 \u0437\u0430\u043A\u0430\u0437\u043E\u0432 \u043D\u0435\u0442, \u0442\u043E \u0431\u043E\u0442 \u043F\u043E\u0440\u0435\u043A\u043E\u043C\u0435\u043D\u0434\u0443\u0435\u0442 \u043E\u0431\u0440\u0430\u0442\u0438\u0442\u044C\u0441\u044F \u043A \u0443\u043F\u0440\u0430\u0432\u043B\u044F\u044E\u0449\u0435\u043C\u0443.

*\u0412\u043E\u043F\u0440\u043E\u0441 - \u043A\u0430\u043A \u043E\u043F\u0435\u0440\u0435\u043B\u044F\u0435\u0442\u0441\u044F \u043F\u0440\u043E\u0433\u043D\u043E\u0437\u043D\u043E\u0435 \u0432\u0440\u0435\u043C\u044F \u0434\u043E\u0441\u0442\u0430\u0432\u043A\u0438?*
\u041F\u0440\u043E\u0433\u043D\u043E\u0437\u043D\u043E\u0435 \u0432\u0440\u0435\u043C\u044F \u0434\u043E\u0441\u0442\u0430\u0432\u043A\u0438 \u0441\u043A\u043B\u0430\u0434\u044B\u0432\u0430\u0435\u0442\u0441\u044F \u0438\u0437 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0445 \u0441\u043E\u0441\u0442\u0430\u0432\u043B\u044F\u044E\u0449\u0438\u0445:
- \u043F\u0440\u043E\u0433\u043D\u043E\u0437\u043D\u043E\u0435 \u0432\u0440\u0435\u043C\u044F \u043F\u043E\u0435\u0437\u0434\u043A\u0438 \u042F\u043D\u0434\u0435\u043A\u0441 \u043E\u0442 \u043F\u0438\u0446\u0446\u0435\u0440\u0438\u0438 \u0434\u043E \u043A\u043B\u0438\u0435\u043D\u0442\u0430 (\u0432 \u043E\u0434\u043D\u0443 \u0441\u0442\u043E\u0440\u043E\u043D\u0443) \u043F\u043E\u0441\u043B\u0435 \u043D\u0430\u0436\u0430\u0442\u0438\u044F \u043A\u043D\u043E\u043F\u043A\u0438 "\u041F\u043E\u0435\u0445\u0430\u043B\u0438";
- \u043F\u043B\u044E\u0441 4 \u043C\u0438\u043D\u0443\u0442\u044B \u043F\u0440\u0435\u0434\u043E\u0441\u0442\u0430\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043D\u0430 \u0432\u044B\u0434\u0430\u0447\u0443 \u0437\u0430\u043A\u0430\u0437\u0430 \u043A\u043B\u0438\u0435\u043D\u0442\u0443 (\u043B\u0438\u0444\u0442, \u0440\u0430\u0441\u0447\u0435\u0442 \u0438 \u043F\u0440\u043E\u0447\u0435\u0435);
- \u043F\u043B\u044E\u0441 \u043C\u0438\u043D\u0443\u0442\u044B \u0434\u043E\u0431\u0430\u0432\u043E\u0447\u043D\u043E\u0433\u043E \u0432\u0440\u0435\u043C\u0435\u043D\u0438 (Extra time). \u0414\u043E\u0431\u0430\u0432\u043E\u0447\u043D\u043E\u0435 \u0432\u0440\u0435\u043C\u044F \u0441\u043E\u0441\u0442\u0430\u0432\u043B\u044F\u0435\u0442 \u043E\u0442 1 \u0434\u043E 3 \u043C\u0438\u043D\u0443\u0442 \u0438 \u0443\u043A\u0430\u0437\u044B\u0432\u0430\u0435\u0442\u0441\u044F \u0432 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0438 \u043E \u043D\u0430\u0440\u0443\u0448\u0435\u043D\u0438\u0438 \u0441\u0440\u043E\u043A\u043E\u0432 \u0434\u043E\u0441\u0442\u0430\u0432\u043A\u0438 \u0437\u0430\u043A\u0430\u0437\u0430.

*\u0423\u0441\u043B\u043E\u0432\u0438\u0435 \u043F\u043E\u043F\u0430\u0434\u0430\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430 \u043D\u0430 \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0443*	
\u041E\u0441\u043D\u043E\u0432\u043D\u043E\u0435 \u0443\u0441\u043B\u043E\u0432\u0438\u0435 \u043F\u043E\u043F\u0430\u0434\u0430\u043D\u0438\u044F \u0437\u0430\u043A\u0430\u0437\u0430 \u043D\u0430 \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0443 \u044D\u0442\u043E \u0437\u0430\u0434\u0435\u0440\u0436\u043A\u0430 \u0431\u043E\u043B\u0435\u0435,  \u0447\u0435\u043C \u043D\u0430 3 \u043C\u0438\u043D\u0443\u0442\u044B \u043E\u0442 \u043F\u0440\u043E\u0433\u043D\u043E\u0437\u043D\u043E\u0433\u043E \u0432\u0440\u0435\u043C\u0435\u043D\u0438 \u0434\u043E\u0441\u0442\u0430\u0432\u043A\u0438 (\u043F\u0440\u043E\u0433\u043D\u043E\u0437\u043D\u043E\u0435 \u0432\u0440\u0435\u043C\u044F \u043F\u043E\u0435\u0437\u0434\u043A\u0438 \u042F\u043D\u0434\u0435\u043A\u0441 + 4 \u043C\u0438\u043D\u0443\u0442\u044B \u043D\u0430 \u043F\u0435\u0440\u0435\u0434\u0430\u0447\u0443 \u0437\u0430\u043A\u0430\u0437\u0430 + Extra time). 
\u0415\u0441\u043B\u0438 \u0432 \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u0435 \u0434\u043E\u0441\u0442\u0430\u0432\u043A\u0438 \u0431\u044B\u043B \u0432\u044B\u0434\u0430\u043D \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043A\u0430\u0442, \u0442\u043E \u0437\u0430\u043A\u0430\u0437 \u043F\u043E\u043F\u0430\u0434\u0435\u0442 \u043D\u0430 \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0443 \u0432 \u0441\u043B\u0443\u0447\u0430\u0435 \u043F\u0440\u0435\u0432\u044B\u0448\u0435\u043D\u0438\u044F \u043F\u0440\u043E\u0433\u043D\u043E\u0437\u043D\u043E\u0433\u043E \u0432\u0440\u0435\u043C\u0435\u043D\u0438 \u0434\u043E\u0441\u0442\u0430\u0432\u043A\u0438.
\u0412 \u0441\u0432\u044F\u0437\u0438 \u0441 \u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E\u0439 \u043E\u0448\u0438\u0431\u043A\u043E\u0439 \u0440\u0430\u0441\u0447\u0435\u0442\u0430 \u0440\u0430\u0441\u0441\u0442\u043E\u044F\u043D\u0438\u0439 \u043D\u0435 \u0443\u0447\u0438\u0442\u044B\u0432\u0430\u044E\u0442\u0441\u044F \u043F\u043E\u0435\u0437\u0434\u043A\u0438 \u0441 2-\u043C\u044F \u0438 \u0431\u043E\u043B\u0435\u0435 \u0437\u0430\u043A\u0430\u0437\u0430\u043C\u0438.
\u041D\u0435 \u0443\u0447\u0438\u0442\u044B\u0432\u0430\u044E\u0442\u0441\u044F \u043D\u0435\u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0435 \u0437\u0430\u043A\u0430\u0437\u044B (\u0437\u0430\u043A\u0430\u0437\u044B, \u043E\u0442\u043C\u0435\u0447\u0435\u043D\u043D\u044B\u0435 \u0432\u044B\u0434\u0430\u043D\u043D\u044B\u043C\u0438 \u0434\u0430\u043B\u0435\u0435 300 \u043C\u0435\u0442\u0440\u043E\u0432 \u043E\u0442 \u043A\u043B\u0438\u0435\u043D\u0442\u0430).

*\u041A\u043E\u0433\u0434\u0430 \u043A\u0443\u0440\u044C\u0435\u0440 \u043F\u043E\u043B\u0443\u0447\u0430\u0435\u0442 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0435 \u043F\u043E \u0437\u0430\u043A\u0430\u0437\u0443, \u043F\u043E\u043F\u0430\u0432\u0448\u0435\u043C\u0443 \u043D\u0430 \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0443?*
\u0412 \u0441\u043B\u0443\u0447\u0430\u0435, \u0435\u0441\u043B\u0438 \u0437\u0430\u043A\u0430\u0437, \u0434\u043E\u0441\u0442\u0430\u0432\u043B\u0435\u043D\u043D\u044B\u0439 \u043A\u0443\u0440\u044C\u0435\u0440\u043E\u043C, \u043F\u043E\u043F\u0430\u0434\u0430\u0435\u0442 \u043D\u0430 \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0443, \u0441\u0438\u0441\u0442\u0435\u043C\u0430 \u043E\u0442\u043F\u0440\u0430\u0432\u0438\u0442 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0435 \u043A\u0443\u0440\u044C\u0435\u0440\u0443 \u0447\u0435\u0440\u0435\u0437 \u043E\u0434\u0438\u043D \u0447\u0430\u0441.

*\u0415\u0441\u043B\u0438 \u043A\u0443\u0440\u044C\u0435\u0440 \u043D\u0435 \u043E\u0442\u0432\u0435\u0442\u0438\u043B \u043D\u0430 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435, \u0447\u0442\u043E \u043F\u0440\u043E\u0438\u0437\u043E\u0439\u0434\u0435\u0442?*	
\u0411\u043E\u0442 \u0431\u0443\u0434\u0435\u0442 \u043F\u0435\u0440\u0432\u044B\u0435 2 \u0434\u043D\u044F \u043F\u0438\u0441\u0430\u0442\u044C \u043A\u0443\u0440\u044C\u0435\u0440\u0443 \u0432 09:00 \u043F\u0438\u0441\u044C\u043C\u043E \u0441 \u043F\u0440\u043E\u0441\u044C\u0431\u043E\u0439 \u0434\u0430\u0442\u044C \u043F\u043E\u044F\u0441\u043D\u0435\u043D\u0438\u044F \u043F\u043E \u043F\u0440\u043E\u0441\u0440\u043E\u0447\u043A\u0435. 
\u0415\u0441\u043B\u0438 \u043F\u043E \u0438\u0441\u0442\u0435\u0447\u0435\u043D\u0438\u0438 2-\u0445 \u0434\u043D\u0435\u0439 \u043A\u0443\u0440\u044C\u0435\u0440 \u043D\u0435 \u043D\u0430\u043F\u0438\u0441\u0430\u043B \u043E\u0442\u0432\u0435\u0442\u0430 \u043F\u043E \u043F\u0440\u043E\u0441\u0440\u043E\u0447\u043A\u0435, \u0442\u043E \u0431\u0443\u0434\u0435\u0442 \u043D\u0430\u043F\u0438\u0441\u0430\u043D\u043E \u043F\u0438\u0441\u044C\u043C\u043E \u0443\u0436\u0435 \u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043D\u043D\u043E\u043C\u0443 \u0437\u0430 \u0433\u0440\u0430\u0444\u0438\u043A \u043A\u0443\u0440\u044C\u0435\u0440\u043E\u0432, \u0447\u0442\u043E\u0431\u044B \u0442\u043E\u0442 \u0441\u0432\u044F\u0437\u0430\u043B\u0441\u044F \u0441 \u043A\u0443\u0440\u044C\u0435\u0440\u043E\u043C.

*\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0442\u0440\u0430\u043D\u0441\u043F\u043E\u0440\u0442\u043D\u043E\u0435 \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u043E*
- \u0432\u044B\u0431\u0440\u0430\u043D\u043E \u043F\u0435\u0448\u043A\u043E\u043C \u0438 \u043F\u0440\u043E\u0433\u043D\u043E\u0437\u043D\u043E\u0435 \u0432\u0440\u0435\u043C\u044F \u0434\u043E\u043B\u044C\u0448\u0435 12 \u043C\u0438\u043D\u0443\u0442 (\u0441\u043B\u0438\u0448\u043A\u043E\u043C \u0434\u0430\u043B\u044C\u043D\u0438\u0439 \u043F\u043E\u0445\u043E\u0434);
- \u0432\u044B\u0431\u0440\u0430\u043D \u0432\u0435\u043B\u043E\u0441\u0438\u043F\u0435\u0434.

*\u041A\u0430\u043A \u0443\u0437\u043D\u0430\u0442\u044C \u0441\u0432\u043E\u0439 ID \u0438\u0434\u0435\u043D\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u043E\u0440 \u0432 \u0442\u0435\u043B\u0435\u0433\u0440\u0430\u043C\u043C?*
\u0427\u0442\u043E\u0431\u044B \u0443\u0437\u043D\u0430\u0442\u044C \u0441\u0432\u043E\u0439 ID \u0443\u0441\u0442\u0430\u043D\u043E\u0432\u0438 \u0432 \u043A\u043E\u043D\u0442\u0430\u043A\u0442 @my_id_bot. \u0418 \u043F\u043E\u0442\u043E\u043C \u0447\u0435\u0440\u0435\u0437 \u043A\u043E\u043C\u0430\u043D\u0434\u0443 /id \u0443\u0437\u043D\u0430\u0439 \u0438\u0434\u0435\u043D\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u043E\u0440`}function ee(){return`
\u041F\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044E \u0442\u0435\u0431\u044F. \u042F \u0431\u043E\u0442 \u0414\u043E\u0434\u043E \u043F\u0438\u0446\u0446\u0430 \u0438 \u0431\u0443\u0434\u0443 \u043F\u043E\u0434\u0441\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C \u0442\u0435\u0431\u0435 \u0435\u0441\u043B\u0438 \u0447\u0442\u043E \u0442\u043E \u043D\u0435 \u0442\u0430\u043A \u0431\u0443\u0434\u0435\u0442 \u0441 \u0437\u0430\u043A\u0430\u0437\u0430\u043C\u0438. \u041F\u043E\u043A\u0430\u0436\u0438 \u044D\u0442\u043E \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435 \u0441\u0432\u043E\u0435\u043C\u0443 \u0443\u043F\u0440\u0430\u0432\u043B\u044F\u044E\u0449\u0435\u043C\u0443. \u041D\u0430\u0434\u0435\u044E\u0441\u044C \u0447\u0442\u043E \u043D\u0435 \u0431\u0443\u0434\u0443 \u0442\u0435\u0431\u044F \u0441\u0438\u043B\u044C\u043D\u043E \u0431\u0435\u0441\u043F\u043E\u043A\u043E\u0438\u0442\u044C.
`}var m=new w.Bot(E);m.api.config.use((0,te.autoRetry)({rethrowInternalServerErrors:!0}));m.use((0,T.conversations)());var re=30*60*1e3;m.use((0,T.createConversation)(B,{maxMillisecondsToWait:re}));m.use((0,T.createConversation)(G,{maxMillisecondsToWait:re}));m.on("callback_query:data",k);W(m);m.command("qrcode",e=>Y(e));m.command("payment",e=>Z(e));m.command("my_orders",e=>V(e));m.command("mysalary",e=>J(e));m.command("problem_orders",e=>z(e));m.command("faq",e=>e.reply(X(),{parse_mode:"Markdown"}));m.command("start",e=>e.reply(ee()));m.command("test",e=>e.conversation.enter("testOrder"));m.catch(e=>{let t=e.ctx;console.error(`\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0435 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F ${t.update.update_id}:`);let o=e.error;o instanceof w.GrammyError?console.error("\u0412\u043D\u0435\u0448\u043D\u044F\u044F \u041E\u0448\u0438\u0431\u043A\u0430 \u0432 \u0437\u0430\u043F\u0440\u043E\u0441\u0435:",o.description):o instanceof w.HttpError?console.error("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0441\u0432\u044F\u0437\u0430\u0442\u044C\u0441\u044F \u0441 Telegram:",o):console.error("\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u0430\u044F \u043E\u0448\u0438\u0431\u043A\u0430:",o)});m.start();console.log("\u0411\u043E\u0442 \u0437\u0430\u043F\u0443\u0449\u0449\u0435\u043D");
